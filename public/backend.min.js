!function(){"use strict";var t=function(){function t(t){var e=t.querySelector(".widget-group--container");this.min=Number.parseInt(e.getAttribute("data-min")),this.max=Number.parseInt(e.getAttribute("data-max")),this.elements=Array.from(e.querySelectorAll(".widget-group--element")),this.footerContainer=t.querySelector(".widget-group--footer .controls"),this.orderField=this.footerContainer.querySelector("input[data-order]")}return t.setPosition=function(t,e){t.style.order=e.toString()},t.getPosition=function(t){return Number.parseInt(t.style.order)},t.setState=function(t,e){e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")},t.prototype.init=function(){var e=this;this.updateElementStates(),this.elements.forEach((function(n){var r=e.getButtons(n),o=r[0],i=r[1],a=r[2],s=r[3];o.addEventListener("click",(function(r){r.preventDefault();var o=t.getPosition(n);e.swap(o,o-1)})),i.addEventListener("click",(function(r){r.preventDefault();var o=t.getPosition(n);e.swap(o,o+1)})),a.addEventListener("click",(function(r){r.preventDefault();var o=t.getPosition(n);e.remove(o)})),s.addEventListener("click",(function(t){t.preventDefault(),e.updateOrderTarget(!0),n.closest("form").submit()}))}))},t.prototype.getButtons=function(t){return[t.querySelector("button[data-up]"),t.querySelector("button[data-down]"),t.querySelector("button[data-remove]"),this.footerContainer.querySelector("button[data-add]")]},t.prototype.updateElementStates=function(){var e=this;this.elements.forEach((function(n,r){t.setPosition(n,r);var o=e.getButtons(n),i=o[0],a=o[1],s=o[2],u=o[3],d=e.elements.length;t.setState(i,0!==r),t.setState(a,d-1!==r),t.setState(s,isNaN(e.min)||d!==e.min),t.setState(u,isNaN(e.max)||d!==e.max)})),this.updateOrderTarget()},t.prototype.updateOrderTarget=function(t){void 0===t&&(t=!1);var e=this.elements.map((function(t){return Number.parseInt(t.getAttribute("data-id"))}));t&&e.push(0),this.orderField.value=e.join(",")},t.prototype.swap=function(t,e){var n;n=[this.elements[e],this.elements[t]],this.elements[t]=n[0],this.elements[e]=n[1],this.updateElementStates()},t.prototype.remove=function(t){this.elements[t].remove(),this.elements.splice(t,1),this.updateElementStates()},t}();document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".widget-group").forEach((function(e){new t(e).init()}))}))}();
